{{#> base }}

{{#*inline "content-block"}}
  <div class="container mtm">
    <div class="row d-flex justify-content-center">

      <div class="col-md-6">
        {{> flash_message }}

        <h4 class="text-center">Search by symbol or company name</h4>

        <!-- search -->
        <form action="/search" method="get" class="mt-4">
          <div class="input-group mb-3">
            <input type="text" autocomplete="off" class="form-control" id="stockInput" name="symbol" placeholder="BOX, SQ, Disney, etc.">
            <div class="dropdown-menu col-md-12" id="filteredResultsContainer">
              <div id="filteredResults"></div>
            </div>
            <div class="input-group-append">
              <button class="btn btn-primary" type="submit" data-loading="Searching...">Search</button>
            </div>
          </div>
        </form>

      </div>

      <!-- watchlist -->
      <div class="col-md-8 mtm">
        <h5>Watchlist</h5>
        <hr>
        {{#if user}}
          {{#if watchlist}}
            {{#each watchlist}}
              <div class="card mvs">
                <div class="card-body">
                  <div class="row">
                    <div class="col-6 overflow">
                      <a href="/search?symbol={{this.quote.data.symbol}}"><h5>{{this.quote.data.symbol}}</h5></a>
                      <span>{{this.quote.data.companyName}}</span>
                    </div>
                    <div class="col-6">
                      <div class="price pull-right" data-price="{{this.quote.data.latestPrice}}"></div>
                      <br>
                      <div class="daily-change-watchlist pull-right mtxs" change-percent="{{this.quote.data.dailyChange.changePercent}}">
                      </div>
                    </div>

                  </div>
                </div>
              </div>
            {{/each}}
          {{else}}
            Your watchlist is empty
          {{/if}}
        {{else}}
          <a href="/auth/google">Login with Google</a> to create a watchlist
        {{/if}}
      </div>

    </div>
  </div>

{{/inline}}

{{/base}}
